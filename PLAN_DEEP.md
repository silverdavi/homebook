# Homebook - Deep Planning Document

> User-story driven educational worksheet generator
> Built with distributed Claude Code agents

---

## Part 1: User Stories

### Story 1: The 5th Grade Fractions Teacher

**Who:** Ms. Rodriguez, 5th grade math teacher at Lincoln Elementary
**Context:** Tomorrow she's introducing adding fractions with unlike denominators
**Need:** Differentiated practice worksheets for her three ability groups

```
Ms. Rodriguez opens Homebook after school. 

She selects:
  Subject: Mathematics
  Grade: 5th Grade  
  Topic: Fractions ‚Üí Adding with Unlike Denominators
  
She creates THREE worksheets:

WORKSHEET A - Struggling Learners (8 students)
  ‚òë Include visual models (fraction bars)
  ‚òë Include step-by-step hints
  ‚òë Start with simple denominators (2, 4, 8)
  ‚òë Only 8 problems
  ‚òë Large answer spaces
  ‚òê Answer key (she'll grade by hand)
  
WORKSHEET B - On-Grade-Level (15 students)  
  ‚òë Mixed denominators
  ‚òë 15 problems
  ‚òë Include 2 word problems
  ‚òë Answer key on back
  ‚òê Visual models
  
WORKSHEET C - Advanced (5 students)
  ‚òë Complex denominators (5, 7, 9, 12)
  ‚òë 20 problems including improper fractions
  ‚òë 5 word problems (real-world contexts)
  ‚òë Challenge problems at the end
  ‚òë Self-check answer key

She downloads all three PDFs, prints 30 copies total.
Total time: 4 minutes.
```

**What she DIDN'T have to do:**
- Search through workbook for appropriate pages
- Photocopy from 3 different sources
- Manually write problems on the board
- Find answer keys scattered across teacher editions

---

### Story 2: The 3rd Grade Number Sense Teacher

**Who:** Mr. Chen, 3rd grade teacher
**Context:** Unit on place value and comparing numbers up to 1,000
**Need:** Practice sheets for comparing 3-digit numbers using <, >, =

```
Mr. Chen opens Homebook during his prep period.

He selects:
  Subject: Mathematics
  Grade: 3rd Grade
  Topic: Number Sense ‚Üí Comparing Numbers (3-digit)

Configuration:
  ‚òë Use comparison symbols: <, >, =
  ‚òë Include place value chart reference at top
  ‚òë 20 comparison problems
  ‚òë Mix of:
      - Obvious comparisons (324 vs 891)
      - Tricky same-first-digit (456 vs 412)  
      - Equal numbers with different forms
  ‚òë 5 "order from least to greatest" problems
  ‚òê Word problems (not yet, next week)
  ‚òë Answer key included

Personalization:
  Title: "Comparing Big Numbers"
  Student Name: [blank line]
  Class: "Mr. Chen's Marvelous Mathematicians"
  
Downloads PDF, makes 28 copies.
```

**Problem examples generated:**

```
Compare using <, >, or =

1.  456 ‚óã 891          2.  723 ‚óã 719
3.  505 ‚óã 550          4.  300 + 40 + 7 ‚óã 347
5.  "eight hundred twelve" ‚óã 821
...

Order from LEAST to GREATEST:
16. 492, 429, 924, 249 ‚Üí ____, ____, ____, ____
```

---

### Story 3: The Homeschool Parent (Multi-Grade)

**Who:** Sarah, homeschooling mom of three kids
**Context:** Morning math block, each child at different level
**Need:** One worksheet per child, printed before breakfast

```
Sarah opens Homebook at 6:30am with coffee.

CHILD 1: Emma (Kindergarten, age 5)
  Subject: Math
  Grade: Kindergarten
  Topic: Counting ‚Üí Numbers 1-20
  
  ‚òë Large, friendly font
  ‚òë Include counting pictures (dots, stars)
  ‚òë Tracing numbers 11-20
  ‚òë "How many?" counting exercises (up to 15)
  ‚òë Fun theme: Animals
  ‚òë 10 problems only
  ‚òë No answer key (she'll check in person)
  
CHILD 2: Jack (2nd Grade, age 7)
  Subject: Math
  Grade: 2nd Grade
  Topic: Addition ‚Üí Two-digit addition without regrouping
  
  ‚òë Vertical format (stacked)
  ‚òë 15 problems
  ‚òë Include number line reference
  ‚òë Answer key (he self-checks)
  
CHILD 3: Mia (6th Grade, age 11)  
  Subject: Math
  Grade: 6th Grade
  Topic: Ratios ‚Üí Unit Rates
  
  ‚òë 12 problems
  ‚òë Word problems with real contexts
  ‚òë Include worked example at top
  ‚òë Answer key with work shown
  
Downloads 3 PDFs. Kids start math at 8am.
```

---

### Story 4: The Tutoring Center

**Who:** Mathnasium franchise owner
**Context:** Preparing for Saturday session with 15 students
**Need:** Individualized practice sheets per student skill gaps

```
Tutor Maria logs into Homebook (business account).

She has 15 students scheduled:
  - 4 students working on multiplication facts (3rd grade)
  - 3 students on fraction basics (4th grade)  
  - 5 students on pre-algebra equations (7th grade)
  - 3 students on algebra word problems (8th grade)

She generates:
  
MULTIPLICATION FACTS DRILL (for 4 students)
  ‚òë Mixed 1-12 tables
  ‚òë 50 problems (speed drill format)
  ‚òë 5-minute timed format
  ‚òë Answer key separate
  ‚òë Progress tracker checkbox grid
  
FRACTION FOUNDATIONS (for 3 students)
  ‚òë Visual fraction identification
  ‚òë Equivalent fractions
  ‚òë Comparing fractions
  ‚òë 20 problems, mixed
  
PRE-ALGEBRA EQUATIONS (for 5 students)
  ‚òë One-step equations
  ‚òë Two-step equations  
  ‚òë Balance scale visuals for conceptual
  ‚òë 15 problems
  ‚òë Show work space
  
ALGEBRA WORD PROBLEMS (for 3 students)
  ‚òë Age problems
  ‚òë Distance/rate problems
  ‚òë Mixture problems
  ‚òë 8 problems with generous work space
  ‚òë Full solution key with steps
  
Batch downloads all. Prints packet per student.
```

---

### Story 5: The Test Prep Teacher

**Who:** Ms. Jackson, 4th grade teacher
**Context:** State test in 3 weeks, students need practice with test-format questions
**Need:** Practice tests that mirror state assessment style

```
Ms. Jackson opens Homebook's "Test Prep" mode.

She selects:
  State: Texas (STAAR format)
  Grade: 4th Grade
  Subject: Math
  
Topics to cover:
  ‚òë Place value
  ‚òë Multi-digit multiplication
  ‚òë Fractions
  ‚òë Geometry (angles, shapes)
  ‚òë Measurement conversion
  ‚òë Data/graphs
  
Format options:
  ‚òë Multiple choice (4 options)
  ‚òë Gridded response (fill-in)
  ‚òë Include "select all that apply"
  ‚òë 30 questions
  ‚òë Bubble sheet format
  ‚òë Calculator/No-calculator sections marked
  ‚òë Answer key with standards alignment
  
Downloads 20-page practice test PDF.
```

---

### Story 6: The Special Education Teacher

**Who:** Mr. Williams, special ed resource room
**Context:** Supporting students with IEPs in math
**Need:** Heavily scaffolded worksheets with accommodations built in

```
Mr. Williams opens Homebook with accommodation mode.

Student: Marcus, 5th grader with dyscalculia
  Grade Level: 5th
  Working Level: 3rd grade math
  Topic: Multiplication (single digit √ó double digit)
  
Accommodations:
  ‚òë Large print (18pt minimum)
  ‚òë Extra spacing between problems
  ‚òë Graph paper grid for alignment
  ‚òë Step-by-step scaffolding boxes
  ‚òë Partial products method shown
  ‚òë Only 6 problems per page
  ‚òë Visual multiplication array hints
  ‚òë Reduced cognitive load (no distractors)
  ‚òë Answer key with error analysis
  
Student: Jamie, 4th grader with ADHD
  Topic: Division facts
  
Accommodations:  
  ‚òë Chunked into sections (5 problems, break, 5 more)
  ‚òë Visual timer cues ("About 2 minutes for this section")
  ‚òë Variety in problem formats (keeps engagement)
  ‚òë Built-in movement break prompts
  ‚òë Self-monitoring checklist
```

---

### Story 7: The Emergency Sub

**Who:** Random substitute teacher, 1 hour notice
**Context:** Regular teacher sick, no lesson plans left
**Need:** Grade-appropriate busywork that's actually educational

```
Sub opens Homebook on phone in the parking lot.

She checks the door sign: "Mrs. Patterson - 2nd Grade"

Quick generate:
  Grade: 2nd
  Subject: Math
  Mode: "Review Mix" (samples from common 2nd grade topics)
  
Auto-generates:
  - 10 addition problems (2-digit)
  - 10 subtraction problems (2-digit)
  - 5 counting money problems
  - 5 telling time problems
  - 1 fun puzzle/game at the end
  
  ‚òë Answer key included
  ‚òë "Early finisher" extension on back
  
Downloads, emails to school office to print.
Sorted for math block.
```

---

### Story 8: The Math Competition Coach

**Who:** Ms. Lee, runs school Math Olympiad team
**Context:** Weekly practice for math competition
**Need:** Challenge problems beyond grade level

```
Ms. Lee opens Homebook's "Challenge Mode"

Team: 5th graders preparing for Math Olympiad
Topic: Number Theory & Logic

Configuration:
  ‚òë Problems require multiple steps
  ‚òë Include pattern recognition
  ‚òë Include logic puzzles
  ‚òë Difficulty: Competition level
  ‚òë No hints (they need to struggle)
  ‚òê Answer key (she'll discuss solutions)
  
Problem types:
  ‚òë "Find the pattern" sequences
  ‚òë Divisibility rule applications  
  ‚òë Factor/multiple puzzles
  ‚òë Magic squares
  ‚òë Problem-solving with constraints
  
Downloads for 8 team members.
```

---

## Part 2: Complete Topic Taxonomy

Based on user stories, here's the full topic tree:

```
MATHEMATICS
‚îú‚îÄ‚îÄ Counting & Cardinality (PreK-K)
‚îÇ   ‚îú‚îÄ‚îÄ Counting 1-10
‚îÇ   ‚îú‚îÄ‚îÄ Counting 1-20
‚îÇ   ‚îú‚îÄ‚îÄ Counting 1-100
‚îÇ   ‚îú‚îÄ‚îÄ Count objects (up to 10)
‚îÇ   ‚îú‚îÄ‚îÄ Count objects (up to 20)
‚îÇ   ‚îú‚îÄ‚îÄ Number recognition 0-10
‚îÇ   ‚îú‚îÄ‚îÄ Number recognition 0-20
‚îÇ   ‚îú‚îÄ‚îÄ Number tracing
‚îÇ   ‚îú‚îÄ‚îÄ One-to-one correspondence
‚îÇ   ‚îî‚îÄ‚îÄ Counting sequence (what comes next/before)
‚îÇ
‚îú‚îÄ‚îÄ Number Sense & Place Value
‚îÇ   ‚îú‚îÄ‚îÄ Comparing numbers (1-digit)
‚îÇ   ‚îú‚îÄ‚îÄ Comparing numbers (2-digit)
‚îÇ   ‚îú‚îÄ‚îÄ Comparing numbers (3-digit)
‚îÇ   ‚îú‚îÄ‚îÄ Comparing numbers (4+ digit)
‚îÇ   ‚îú‚îÄ‚îÄ Ordering numbers (least to greatest)
‚îÇ   ‚îú‚îÄ‚îÄ Place value (tens and ones)
‚îÇ   ‚îú‚îÄ‚îÄ Place value (hundreds)
‚îÇ   ‚îú‚îÄ‚îÄ Place value (thousands+)
‚îÇ   ‚îú‚îÄ‚îÄ Expanded form
‚îÇ   ‚îú‚îÄ‚îÄ Word form ‚Üî standard form
‚îÇ   ‚îú‚îÄ‚îÄ Rounding (nearest 10)
‚îÇ   ‚îú‚îÄ‚îÄ Rounding (nearest 100)
‚îÇ   ‚îú‚îÄ‚îÄ Rounding (nearest 1000)
‚îÇ   ‚îú‚îÄ‚îÄ Even and odd numbers
‚îÇ   ‚îî‚îÄ‚îÄ Skip counting (2s, 5s, 10s)
‚îÇ
‚îú‚îÄ‚îÄ Addition
‚îÇ   ‚îú‚îÄ‚îÄ Addition facts (sums to 5)
‚îÇ   ‚îú‚îÄ‚îÄ Addition facts (sums to 10)
‚îÇ   ‚îú‚îÄ‚îÄ Addition facts (sums to 18)
‚îÇ   ‚îú‚îÄ‚îÄ Addition facts (sums to 20)
‚îÇ   ‚îú‚îÄ‚îÄ Adding zero
‚îÇ   ‚îú‚îÄ‚îÄ Adding doubles
‚îÇ   ‚îú‚îÄ‚îÄ Adding near-doubles
‚îÇ   ‚îú‚îÄ‚îÄ Two-digit + one-digit (no regrouping)
‚îÇ   ‚îú‚îÄ‚îÄ Two-digit + two-digit (no regrouping)
‚îÇ   ‚îú‚îÄ‚îÄ Two-digit + two-digit (with regrouping)
‚îÇ   ‚îú‚îÄ‚îÄ Three-digit addition
‚îÇ   ‚îú‚îÄ‚îÄ Multi-digit addition
‚îÇ   ‚îú‚îÄ‚îÄ Addition with missing addends
‚îÇ   ‚îú‚îÄ‚îÄ Column addition (3+ numbers)
‚îÇ   ‚îî‚îÄ‚îÄ Mental math addition strategies
‚îÇ
‚îú‚îÄ‚îÄ Subtraction
‚îÇ   ‚îú‚îÄ‚îÄ Subtraction facts (within 5)
‚îÇ   ‚îú‚îÄ‚îÄ Subtraction facts (within 10)
‚îÇ   ‚îú‚îÄ‚îÄ Subtraction facts (within 18)
‚îÇ   ‚îú‚îÄ‚îÄ Subtraction facts (within 20)
‚îÇ   ‚îú‚îÄ‚îÄ Two-digit ‚àí one-digit (no regrouping)
‚îÇ   ‚îú‚îÄ‚îÄ Two-digit ‚àí two-digit (no regrouping)
‚îÇ   ‚îú‚îÄ‚îÄ Two-digit ‚àí two-digit (with regrouping)
‚îÇ   ‚îú‚îÄ‚îÄ Three-digit subtraction
‚îÇ   ‚îú‚îÄ‚îÄ Multi-digit subtraction
‚îÇ   ‚îú‚îÄ‚îÄ Subtraction with missing numbers
‚îÇ   ‚îú‚îÄ‚îÄ Subtraction across zeros
‚îÇ   ‚îî‚îÄ‚îÄ Mental math subtraction strategies
‚îÇ
‚îú‚îÄ‚îÄ Multiplication
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication concept (groups of)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó2)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó3)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó4)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó5)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó6)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó7)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó8)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó9)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó10)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó11)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplication facts (√ó12)
‚îÇ   ‚îú‚îÄ‚îÄ Mixed multiplication facts (1-12)
‚îÇ   ‚îú‚îÄ‚îÄ Multiplying by 10, 100, 1000
‚îÇ   ‚îú‚îÄ‚îÄ Single-digit √ó double-digit
‚îÇ   ‚îú‚îÄ‚îÄ Double-digit √ó double-digit
‚îÇ   ‚îú‚îÄ‚îÄ Multi-digit multiplication
‚îÇ   ‚îú‚îÄ‚îÄ Partial products method
‚îÇ   ‚îú‚îÄ‚îÄ Lattice multiplication
‚îÇ   ‚îú‚îÄ‚îÄ Properties of multiplication
‚îÇ   ‚îî‚îÄ‚îÄ Factors and multiples
‚îÇ
‚îú‚îÄ‚îÄ Division
‚îÇ   ‚îú‚îÄ‚îÄ Division concept (sharing equally)
‚îÇ   ‚îú‚îÄ‚îÄ Division facts (√∑2)
‚îÇ   ‚îú‚îÄ‚îÄ Division facts (√∑3)
‚îÇ   ‚îú‚îÄ‚îÄ Division facts (√∑4)
‚îÇ   ‚îú‚îÄ‚îÄ Division facts (√∑5)
‚îÇ   ‚îú‚îÄ‚îÄ Division facts (√∑6 through √∑12)
‚îÇ   ‚îú‚îÄ‚îÄ Mixed division facts
‚îÇ   ‚îú‚îÄ‚îÄ Division with remainders
‚îÇ   ‚îú‚îÄ‚îÄ Long division (1-digit divisor)
‚îÇ   ‚îú‚îÄ‚îÄ Long division (2-digit divisor)
‚îÇ   ‚îú‚îÄ‚îÄ Dividing by 10, 100, 1000
‚îÇ   ‚îî‚îÄ‚îÄ Divisibility rules
‚îÇ
‚îú‚îÄ‚îÄ Fractions
‚îÇ   ‚îú‚îÄ‚îÄ Fraction concepts (parts of a whole)
‚îÇ   ‚îú‚îÄ‚îÄ Identifying fractions (visual)
‚îÇ   ‚îú‚îÄ‚îÄ Fractions on a number line
‚îÇ   ‚îú‚îÄ‚îÄ Equivalent fractions
‚îÇ   ‚îú‚îÄ‚îÄ Simplifying fractions
‚îÇ   ‚îú‚îÄ‚îÄ Comparing fractions (same denominator)
‚îÇ   ‚îú‚îÄ‚îÄ Comparing fractions (same numerator)
‚îÇ   ‚îú‚îÄ‚îÄ Comparing fractions (unlike)
‚îÇ   ‚îú‚îÄ‚îÄ Ordering fractions
‚îÇ   ‚îú‚îÄ‚îÄ Adding fractions (same denominator)
‚îÇ   ‚îú‚îÄ‚îÄ Subtracting fractions (same denominator)
‚îÇ   ‚îú‚îÄ‚îÄ Adding fractions (unlike denominators)  ‚Üê Ms. Rodriguez
‚îÇ   ‚îú‚îÄ‚îÄ Subtracting fractions (unlike denominators)
‚îÇ   ‚îú‚îÄ‚îÄ Adding mixed numbers
‚îÇ   ‚îú‚îÄ‚îÄ Subtracting mixed numbers
‚îÇ   ‚îú‚îÄ‚îÄ Multiplying fractions
‚îÇ   ‚îú‚îÄ‚îÄ Dividing fractions
‚îÇ   ‚îú‚îÄ‚îÄ Mixed numbers ‚Üî improper fractions
‚îÇ   ‚îî‚îÄ‚îÄ Fractions of a set
‚îÇ
‚îú‚îÄ‚îÄ Decimals
‚îÇ   ‚îú‚îÄ‚îÄ Decimal concepts (tenths)
‚îÇ   ‚îú‚îÄ‚îÄ Decimal concepts (hundredths)
‚îÇ   ‚îú‚îÄ‚îÄ Reading/writing decimals
‚îÇ   ‚îú‚îÄ‚îÄ Comparing decimals
‚îÇ   ‚îú‚îÄ‚îÄ Ordering decimals
‚îÇ   ‚îú‚îÄ‚îÄ Rounding decimals
‚îÇ   ‚îú‚îÄ‚îÄ Adding decimals
‚îÇ   ‚îú‚îÄ‚îÄ Subtracting decimals
‚îÇ   ‚îú‚îÄ‚îÄ Multiplying decimals
‚îÇ   ‚îú‚îÄ‚îÄ Dividing decimals
‚îÇ   ‚îú‚îÄ‚îÄ Fractions ‚Üî decimals
‚îÇ   ‚îî‚îÄ‚îÄ Decimals ‚Üî percents
‚îÇ
‚îú‚îÄ‚îÄ Percents
‚îÇ   ‚îú‚îÄ‚îÄ Percent concepts
‚îÇ   ‚îú‚îÄ‚îÄ Percent of a number
‚îÇ   ‚îú‚îÄ‚îÄ Finding the percent
‚îÇ   ‚îú‚îÄ‚îÄ Finding the whole
‚îÇ   ‚îú‚îÄ‚îÄ Percent increase/decrease
‚îÇ   ‚îú‚îÄ‚îÄ Discounts and sales tax
‚îÇ   ‚îú‚îÄ‚îÄ Tips and commissions
‚îÇ   ‚îî‚îÄ‚îÄ Simple interest
‚îÇ
‚îú‚îÄ‚îÄ Ratios & Proportions
‚îÇ   ‚îú‚îÄ‚îÄ Ratio concepts
‚îÇ   ‚îú‚îÄ‚îÄ Writing ratios
‚îÇ   ‚îú‚îÄ‚îÄ Equivalent ratios
‚îÇ   ‚îú‚îÄ‚îÄ Unit rates
‚îÇ   ‚îú‚îÄ‚îÄ Proportions
‚îÇ   ‚îú‚îÄ‚îÄ Solving proportions
‚îÇ   ‚îú‚îÄ‚îÄ Scale drawings
‚îÇ   ‚îî‚îÄ‚îÄ Similar figures
‚îÇ
‚îú‚îÄ‚îÄ Pre-Algebra
‚îÇ   ‚îú‚îÄ‚îÄ Variables and expressions
‚îÇ   ‚îú‚îÄ‚îÄ Evaluating expressions
‚îÇ   ‚îú‚îÄ‚îÄ One-step equations (+ and ‚àí)
‚îÇ   ‚îú‚îÄ‚îÄ One-step equations (√ó and √∑)
‚îÇ   ‚îú‚îÄ‚îÄ Two-step equations
‚îÇ   ‚îú‚îÄ‚îÄ Multi-step equations
‚îÇ   ‚îú‚îÄ‚îÄ Inequalities
‚îÇ   ‚îú‚îÄ‚îÄ Graphing on number line
‚îÇ   ‚îú‚îÄ‚îÄ Order of operations
‚îÇ   ‚îú‚îÄ‚îÄ Exponents intro
‚îÇ   ‚îî‚îÄ‚îÄ Integer operations
‚îÇ
‚îú‚îÄ‚îÄ Algebra
‚îÇ   ‚îú‚îÄ‚îÄ Linear equations
‚îÇ   ‚îú‚îÄ‚îÄ Systems of equations
‚îÇ   ‚îú‚îÄ‚îÄ Graphing linear equations
‚îÇ   ‚îú‚îÄ‚îÄ Slope and y-intercept
‚îÇ   ‚îú‚îÄ‚îÄ Polynomials
‚îÇ   ‚îú‚îÄ‚îÄ Factoring
‚îÇ   ‚îú‚îÄ‚îÄ Quadratic equations
‚îÇ   ‚îî‚îÄ‚îÄ Functions
‚îÇ
‚îú‚îÄ‚îÄ Geometry
‚îÇ   ‚îú‚îÄ‚îÄ Basic shapes (2D)
‚îÇ   ‚îú‚îÄ‚îÄ Basic shapes (3D)
‚îÇ   ‚îú‚îÄ‚îÄ Attributes of shapes
‚îÇ   ‚îú‚îÄ‚îÄ Symmetry
‚îÇ   ‚îú‚îÄ‚îÄ Perimeter
‚îÇ   ‚îú‚îÄ‚îÄ Area (rectangles)
‚îÇ   ‚îú‚îÄ‚îÄ Area (triangles)
‚îÇ   ‚îú‚îÄ‚îÄ Area (complex shapes)
‚îÇ   ‚îú‚îÄ‚îÄ Volume (rectangular prism)
‚îÇ   ‚îú‚îÄ‚îÄ Volume (cylinders, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ Angles (identifying)
‚îÇ   ‚îú‚îÄ‚îÄ Angles (measuring)
‚îÇ   ‚îú‚îÄ‚îÄ Angles (complementary/supplementary)
‚îÇ   ‚îú‚îÄ‚îÄ Triangles (classify by sides/angles)
‚îÇ   ‚îú‚îÄ‚îÄ Pythagorean theorem
‚îÇ   ‚îú‚îÄ‚îÄ Coordinate graphing
‚îÇ   ‚îú‚îÄ‚îÄ Transformations
‚îÇ   ‚îî‚îÄ‚îÄ Circles (circumference, area)
‚îÇ
‚îú‚îÄ‚îÄ Measurement
‚îÇ   ‚îú‚îÄ‚îÄ Length (non-standard units)
‚îÇ   ‚îú‚îÄ‚îÄ Length (inches, feet)
‚îÇ   ‚îú‚îÄ‚îÄ Length (centimeters, meters)
‚îÇ   ‚îú‚îÄ‚îÄ Length conversions
‚îÇ   ‚îú‚îÄ‚îÄ Weight/Mass
‚îÇ   ‚îú‚îÄ‚îÄ Capacity/Volume (cups, liters)
‚îÇ   ‚îú‚îÄ‚îÄ Time (telling time - hour)
‚îÇ   ‚îú‚îÄ‚îÄ Time (telling time - half hour)
‚îÇ   ‚îú‚îÄ‚îÄ Time (telling time - 5 min)
‚îÇ   ‚îú‚îÄ‚îÄ Time (telling time - minute)
‚îÇ   ‚îú‚îÄ‚îÄ Elapsed time
‚îÇ   ‚îú‚îÄ‚îÄ Calendar
‚îÇ   ‚îú‚îÄ‚îÄ Temperature
‚îÇ   ‚îî‚îÄ‚îÄ Metric conversions
‚îÇ
‚îú‚îÄ‚îÄ Money
‚îÇ   ‚îú‚îÄ‚îÄ Coin identification
‚îÇ   ‚îú‚îÄ‚îÄ Coin values
‚îÇ   ‚îú‚îÄ‚îÄ Counting coins
‚îÇ   ‚îú‚îÄ‚îÄ Counting bills
‚îÇ   ‚îú‚îÄ‚îÄ Making change
‚îÇ   ‚îî‚îÄ‚îÄ Money word problems
‚îÇ
‚îú‚îÄ‚îÄ Data & Graphs
‚îÇ   ‚îú‚îÄ‚îÄ Picture graphs
‚îÇ   ‚îú‚îÄ‚îÄ Bar graphs
‚îÇ   ‚îú‚îÄ‚îÄ Line graphs
‚îÇ   ‚îú‚îÄ‚îÄ Line plots
‚îÇ   ‚îú‚îÄ‚îÄ Pie charts
‚îÇ   ‚îú‚îÄ‚îÄ Reading tables
‚îÇ   ‚îú‚îÄ‚îÄ Mean, median, mode
‚îÇ   ‚îú‚îÄ‚îÄ Range
‚îÇ   ‚îî‚îÄ‚îÄ Probability basics
‚îÇ
‚îî‚îÄ‚îÄ Word Problems
    ‚îú‚îÄ‚îÄ Addition word problems
    ‚îú‚îÄ‚îÄ Subtraction word problems
    ‚îú‚îÄ‚îÄ Multiplication word problems
    ‚îú‚îÄ‚îÄ Division word problems
    ‚îú‚îÄ‚îÄ Multi-step word problems
    ‚îú‚îÄ‚îÄ Fraction word problems
    ‚îú‚îÄ‚îÄ Percent word problems
    ‚îú‚îÄ‚îÄ Ratio word problems
    ‚îî‚îÄ‚îÄ Algebra word problems
```

---

## Part 3: Distributed Agent Architecture

Using Claude Code CLI, we parallelize development across 5 agents:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        HOMEBOOK AGENT ARCHITECTURE                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                         AGENT SPAWNER                                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  spawn-agents.sh ‚Üí launches 5 parallel agents                       ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ    ‚îÇ  FRONTEND ‚îÇ  ‚îÇ  BACKEND  ‚îÇ  ‚îÇ GENERATOR ‚îÇ  ‚îÇ TEMPLATES ‚îÇ  ‚îÇ INFRA  ‚îÇ ‚îÇ
‚îÇ    ‚îÇ   AGENT   ‚îÇ  ‚îÇ   AGENT   ‚îÇ  ‚îÇ   AGENT   ‚îÇ  ‚îÇ   AGENT   ‚îÇ  ‚îÇ AGENT  ‚îÇ ‚îÇ
‚îÇ    ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ        ‚îÇ ‚îÇ
‚îÇ    ‚îÇ apps/web/ ‚îÇ  ‚îÇ apps/web/ ‚îÇ  ‚îÇ packages/ ‚îÇ  ‚îÇ templates/‚îÇ  ‚îÇ infra/ ‚îÇ ‚îÇ
‚îÇ    ‚îÇ  - app/   ‚îÇ  ‚îÇ  - api/   ‚îÇ  ‚îÇ generator/‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ docker/‚îÇ ‚îÇ
‚îÇ    ‚îÇ  - comps/ ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ  - src/   ‚îÇ  ‚îÇ HTML/CSS  ‚îÇ  ‚îÇ aws/   ‚îÇ ‚îÇ
‚îÇ    ‚îÇ  - lib/   ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ  - gens/  ‚îÇ  ‚îÇ for PDFs  ‚îÇ  ‚îÇ        ‚îÇ ‚îÇ
‚îÇ    ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ        ‚îÇ ‚îÇ
‚îÇ    ‚îÇ Budget:   ‚îÇ  ‚îÇ Budget:   ‚îÇ  ‚îÇ Budget:   ‚îÇ  ‚îÇ Budget:   ‚îÇ  ‚îÇBudget: ‚îÇ ‚îÇ
‚îÇ    ‚îÇ   $40     ‚îÇ  ‚îÇ   $30     ‚îÇ  ‚îÇ   $60     ‚îÇ  ‚îÇ   $25     ‚îÇ  ‚îÇ  $20   ‚îÇ ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ          ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ             ‚îÇ      ‚îÇ
‚îÇ          ‚ñº              ‚ñº              ‚ñº              ‚ñº             ‚ñº      ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ    ‚îÇ                      STATUS FILES (Coordination)                    ‚îÇ ‚îÇ
‚îÇ    ‚îÇ  scripts/agents/frontend-status.md | backend-status.md | ...       ‚îÇ ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### Agent 1: Frontend Agent

**Owns:** `apps/web/app/`, `apps/web/components/`, `apps/web/lib/`

**Mission:** Build the complete worksheet generator UI

**Tasks:**
1. Initialize Next.js 14 app with Tailwind
2. Create UI component library (button, card, checkbox, select, slider, input, tabs)
3. Build SubjectSelector component (icons, categories)
4. Build LevelSelector component (grade picker)
5. Build TopicSelector component (hierarchical topic tree)
6. Build OptionsPanel component (checkboxes, toggles)
7. Build PersonalizationPanel component (name, title, etc.)
8. Build PreviewPane component (live HTML preview)
9. Build DownloadButton component (loading states, success)
10. Build main generator page layout
11. Build landing page / marketing home
12. Build about, pricing pages
13. Implement responsive mobile layout
14. Add animations (Framer Motion)
15. Connect to backend API

**Does NOT touch:** `apps/web/app/api/`, `packages/`, `infra/`

---

### Agent 2: Backend Agent

**Owns:** `apps/web/app/api/`

**Mission:** Build API routes that connect frontend to Python generator

**Tasks:**
1. Create `/api/preview` route (calls Python, returns HTML)
2. Create `/api/generate` route (triggers full PDF generation)
3. Create `/api/download/[id]` route (S3 pre-signed URL)
4. Create `/api/health` route
5. Implement request validation (zod schemas)
6. Implement error handling
7. Add rate limiting
8. Create API client library for frontend
9. Add logging and monitoring hooks
10. Write API tests

**Does NOT touch:** `apps/web/app/(pages)/`, `apps/web/components/`, `packages/generator/`

---

### Agent 3: Generator Agent

**Owns:** `packages/generator/`

**Mission:** Build Python problem generators for all math topics

**Tasks:**
1. Set up Python package structure
2. Create BaseGenerator abstract class
3. Create GeneratorConfig dataclass
4. Create Problem dataclass
5. Implement CountingGenerator (PreK-K)
6. Implement AdditionGenerator (all variants)
7. Implement SubtractionGenerator (all variants)
8. Implement MultiplicationGenerator (all variants)
9. Implement DivisionGenerator (all variants)
10. Implement FractionGenerator (all variants)
11. Implement DecimalGenerator
12. Implement PercentGenerator
13. Implement AlgebraGenerator (equations)
14. Implement GeometryGenerator (area, perimeter, angles)
15. Implement WordProblemGenerator
16. Implement NumberSenseGenerator (comparing, ordering)
17. Create generator registry (topic ‚Üí generator mapping)
18. Create FastAPI server
19. Implement PDF generation with WeasyPrint
20. Implement S3 upload
21. Write comprehensive tests

**Does NOT touch:** `apps/`, `infra/`, `templates/`

---

### Agent 4: Templates Agent

**Owns:** `templates/`, `packages/generator/src/templates/`

**Mission:** Create beautiful, print-optimized HTML/CSS templates

**Tasks:**
1. Create base HTML template (Jinja2)
2. Create print CSS (page margins, fonts, page breaks)
3. Create worksheet header template (title, name line, date)
4. Create problem layouts:
   - Single column
   - Two column
   - Grid (for drills)
   - Vertical math (stacked operations)
5. Create answer line styles
6. Create hint/scaffold boxes
7. Create worked example boxes
8. Create scratch space/graph paper patterns
9. Create answer key template
10. Create visual elements:
    - Fraction bars
    - Number lines
    - Place value charts
    - Coordinate grids
    - Geometry shapes
11. Create theme variations (fun for K-2, professional for upper grades)
12. Test print output on multiple paper sizes
13. Ensure accessibility (color contrast, font sizes)

**Does NOT touch:** `apps/`, `packages/generator/src/generators/`, `infra/`

---

### Agent 5: Infrastructure Agent

**Owns:** `infra/`, `docker/`, root config files

**Mission:** Set up deployment and AWS infrastructure

**Tasks:**
1. Create Dockerfile for Python generator service
2. Create docker-compose.yml for local development
3. Create AWS CloudFormation stack:
   - S3 bucket for PDFs
   - Lambda or ECS for generator
   - IAM roles
   - CloudFront distribution
4. Create deployment scripts
5. Set up environment variables management
6. Create CI/CD pipeline (GitHub Actions)
7. Set up logging and monitoring
8. Create backup procedures
9. Document deployment process

**Does NOT touch:** `apps/`, `packages/generator/src/generators/`

---

## Part 4: Agent Prompts

### Frontend Agent Prompt

```markdown
# Frontend Agent - Homebook

> Session: homebook-frontend-001
> Budget: $40
> Started: [timestamp]

## YOUR OWNERSHIP
You exclusively own and can edit:
- `apps/web/app/` (except `api/` subdirectory)
- `apps/web/components/`
- `apps/web/lib/`
- `apps/web/public/`
- `apps/web/tailwind.config.ts`
- `apps/web/globals.css`

## DO NOT TOUCH
These directories are owned by other agents:
- `apps/web/app/api/` (Backend Agent)
- `packages/` (Generator Agent)
- `templates/` (Templates Agent)
- `infra/`, `docker/` (Infra Agent)

## YOUR MISSION
Build a beautiful, modern worksheet generator UI using Next.js 14 and Tailwind CSS.
Follow the aesthetic established in the user's forformat project (academic slate palette,
Outfit/Inter fonts, paper shadows, subtle animations).

## IMMEDIATE TASKS (in order)

### 1. Initialize Next.js App
Create apps/web/ with:
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS configured with custom theme
- Folder structure ready

### 2. Create UI Components (`apps/web/components/ui/`)
Build these base components with your styling:
- button.tsx (primary, secondary, ghost variants)
- card.tsx (paper-style with shadow)
- checkbox.tsx (styled checkbox with label)
- input.tsx (text input with label)
- select.tsx (dropdown with options)
- slider.tsx (range slider for number of problems)
- tabs.tsx (for subject switching)
- badge.tsx (for tags/labels)

### 3. Create Generator Components (`apps/web/components/generator/`)
- SubjectSelector.tsx - Grid of subjects with icons (Math, Reading, etc.)
- LevelSelector.tsx - Grade/level dropdown (PreK through 12)
- TopicSelector.tsx - Hierarchical topic picker based on subject+level
- OptionsPanel.tsx - All the checkboxes (hints, answer key, etc.)
- PersonalizationPanel.tsx - Student name, title, teacher name inputs
- PreviewPane.tsx - Live preview of worksheet (HTML iframe or rendered)
- DownloadButton.tsx - Generate and download button with loading states

### 4. Create Main Generator Page
- `apps/web/app/page.tsx` or `apps/web/app/generate/page.tsx`
- Combine all generator components
- Two-column layout: config on left, preview on right
- Mobile: stacked layout

### 5. Create Layout Components
- Header.tsx with logo and nav
- Footer.tsx with links

### 6. Data Definitions (`apps/web/lib/`)
- subjects.ts - Subject definitions with icons, colors
- topics.ts - Full topic tree structure
- types.ts - TypeScript interfaces

### 7. Landing Page
- Hero section with tagline
- Feature highlights
- How it works (3 steps)
- Subject showcase
- CTA to generator

## VISUAL DESIGN
Use this color palette (adapted from forformat):
```typescript
colors: {
  // Warm slate for academic feel
  slate: { /* standard */ },
  
  // Primary - friendly teal
  teal: {
    500: '#14b8a6',
    600: '#0d9488',
  },
  
  // CTA - warm amber
  amber: {
    400: '#fbbf24',
    500: '#f59e0b',
  },
  
  // Subject colors
  subject: {
    math: '#6366f1',     // Indigo
    reading: '#ec4899',  // Pink
    science: '#22c55e',  // Green
  },
}
```

Fonts: Outfit (display), Inter (body)
Shadows: Soft paper-like (from forformat)
Animations: Subtle fade-up on load, hover lifts

## GIT RULES
- Pull before editing: `git pull`
- Commit after each component: `git add apps/web && git commit -m "agent/frontend: add [component]"`
- Push immediately: `git push`

## STATUS UPDATES
After each major task, update `scripts/agents/frontend-status.md`

## API INTEGRATION
The backend will expose these endpoints (don't implement, just consume):
- POST /api/preview ‚Üí { html: string }
- POST /api/generate ‚Üí { worksheetId: string, status: string }
- GET /api/download/[id] ‚Üí { downloadUrl: string }

Create mock data for now until backend is ready.
```

---

### Generator Agent Prompt

```markdown
# Generator Agent - Homebook

> Session: homebook-generator-001
> Budget: $60
> Started: [timestamp]

## YOUR OWNERSHIP
You exclusively own and can edit:
- `packages/generator/` (entire directory)

## DO NOT TOUCH
These directories are owned by other agents:
- `apps/` (Frontend and Backend Agents)
- `templates/` (Templates Agent will provide these)
- `infra/` (Infra Agent)

## YOUR MISSION
Build Python problem generators for K-12 mathematics worksheets.
Each generator produces Problem objects that can be rendered to HTML/PDF.

## PROJECT STRUCTURE TO CREATE
```
packages/generator/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # Settings, S3 config
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # Problem, GeneratorConfig dataclasses
‚îÇ   ‚îú‚îÄ‚îÄ generators/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py         # BaseGenerator ABC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registry.py     # topic ‚Üí generator mapping
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ counting.py     # PreK-K counting
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ number_sense.py # Comparing, ordering, place value
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ addition.py     # All addition variants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subtraction.py  # All subtraction variants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ multiplication.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ division.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fractions.py    # All fraction operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ decimals.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ percents.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ratios.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ algebra.py      # Equations, expressions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ geometry.py     # Shapes, area, perimeter
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ measurement.py  # Time, length, weight
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ word_problems.py
‚îÇ   ‚îú‚îÄ‚îÄ renderer.py         # Jinja2 HTML rendering
‚îÇ   ‚îú‚îÄ‚îÄ pdf_generator.py    # WeasyPrint PDF generation
‚îÇ   ‚îú‚îÄ‚îÄ s3_client.py        # S3 upload with pre-signed URLs
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ main.py         # FastAPI server
‚îú‚îÄ‚îÄ templates/              # Will be populated by Templates Agent
‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_generators.py
‚îÇ   ‚îî‚îÄ‚îÄ test_pdf.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ README.md
```

## DATA MODELS

```python
from dataclasses import dataclass, field
from typing import Optional, List, Dict, Any
from enum import Enum

class Difficulty(Enum):
    EASY = "easy"
    MEDIUM = "medium"
    HARD = "hard"
    MIXED = "mixed"

@dataclass
class Problem:
    id: str
    question: str           # Plain text or LaTeX
    answer: str | List[str] # Acceptable answer(s)
    hint: Optional[str] = None
    worked_example: Optional[str] = None
    difficulty: Difficulty = Difficulty.MEDIUM
    topic: str = ""
    subtopic: str = ""
    visual: Optional[str] = None  # SVG or HTML for visuals
    metadata: Dict[str, Any] = field(default_factory=dict)

@dataclass
class GeneratorConfig:
    topic: str
    subtopic: str
    num_problems: int = 10
    difficulty: Difficulty = Difficulty.MEDIUM
    
    # Options
    include_hints: bool = False
    include_worked_examples: bool = False
    include_visuals: bool = False
    
    # For specific generators
    min_value: int = 1
    max_value: int = 100
    allow_negatives: bool = False
    
    # Personalization
    student_name: Optional[str] = None
    worksheet_title: Optional[str] = None
    teacher_name: Optional[str] = None
```

## BASE GENERATOR

```python
from abc import ABC, abstractmethod
from typing import List

class BaseGenerator(ABC):
    """Abstract base class for all problem generators."""
    
    topic: str  # e.g., "addition"
    subtopics: List[str]  # e.g., ["sums-to-10", "sums-to-20", ...]
    grade_range: tuple[int, int]  # e.g., (1, 3) for grades 1-3
    
    @abstractmethod
    def generate(self, config: GeneratorConfig) -> List[Problem]:
        """Generate problems based on config."""
        pass
    
    def supports(self, subtopic: str) -> bool:
        """Check if this generator supports the given subtopic."""
        return subtopic in self.subtopics
```

## IMMEDIATE TASKS (in order)

### 1. Set up package structure
Create all directories and __init__.py files.
Create requirements.txt with:
- fastapi
- uvicorn
- jinja2
- weasyprint
- boto3
- pydantic
- pytest

### 2. Create data models (models.py)
Implement Problem, GeneratorConfig, Difficulty as shown above.

### 3. Create BaseGenerator (generators/base.py)
Implement abstract base class.

### 4. Create AdditionGenerator (generators/addition.py)
This is the reference implementation. Support these subtopics:
- facts-to-5
- facts-to-10
- facts-to-18
- facts-to-20
- two-digit-no-regroup
- two-digit-with-regroup
- three-digit
- multi-digit
- missing-addend

Each problem should be pedagogically sound.

### 5. Create SubtractionGenerator
Mirror addition but for subtraction.

### 6. Create MultiplicationGenerator
Support:
- concept (groups of)
- times-2 through times-12
- mixed-facts
- by-10-100-1000
- single-by-double
- double-by-double

### 7. Create DivisionGenerator
Support facts and long division.

### 8. Create FractionGenerator
This is critical - support:
- identifying-fractions
- equivalent
- comparing-same-denom
- comparing-unlike
- adding-same-denom
- adding-unlike-denom  ‚Üê Ms. Rodriguez story
- subtracting
- multiplying
- dividing
- mixed-numbers

### 9. Create NumberSenseGenerator
For comparing numbers (Mr. Chen story):
- comparing-1-digit
- comparing-2-digit
- comparing-3-digit  ‚Üê Mr. Chen story
- ordering
- place-value
- rounding

### 10. Create remaining generators
- CountingGenerator (PreK-K)
- DecimalGenerator
- PercentGenerator
- AlgebraGenerator
- GeometryGenerator (area, perimeter, angles)
- MeasurementGenerator (time, length)

### 11. Create generator registry
Map topic+subtopic to generator class.

### 12. Create FastAPI server (api/main.py)
Endpoints:
- POST /preview - generate problems, return HTML
- POST /generate - generate problems, create PDF, upload to S3
- GET /health

### 13. Implement PDF generation
Use WeasyPrint with templates (Templates Agent will provide).

### 14. Implement S3 upload
Upload PDFs, return pre-signed URLs.

### 15. Write tests
Test each generator produces valid problems.

## PEDAGOGICAL GUIDELINES

### Problem Difficulty
- EASY: Single-step, small numbers, obvious patterns
- MEDIUM: Grade-level appropriate, some complexity
- HARD: Multi-step, larger numbers, edge cases
- MIXED: Random distribution

### Problem Variety
Within each worksheet, vary:
- Number positions (3 + __ = 7 vs __ + 3 = 7)
- Formats (horizontal vs vertical)
- Contexts (when applicable)

### Distractors to Avoid
- Don't always have largest number first in subtraction
- Don't make all answers the same digit count
- Include "tricky" problems that test understanding

### Hints
Should scaffold without giving away answer:
- "Think about place value..."
- "Try drawing a picture..."
- "Remember: when denominators are the same..."

## EXAMPLE GENERATOR IMPLEMENTATION

```python
# generators/addition.py
import random
from typing import List
from .base import BaseGenerator
from ..models import Problem, GeneratorConfig, Difficulty

class AdditionGenerator(BaseGenerator):
    topic = "addition"
    subtopics = [
        "facts-to-5", "facts-to-10", "facts-to-18", "facts-to-20",
        "two-digit-no-regroup", "two-digit-with-regroup",
        "three-digit", "multi-digit", "missing-addend"
    ]
    grade_range = (1, 4)
    
    def generate(self, config: GeneratorConfig) -> List[Problem]:
        problems = []
        
        for i in range(config.num_problems):
            problem = self._generate_one(config, i)
            problems.append(problem)
        
        return problems
    
    def _generate_one(self, config: GeneratorConfig, index: int) -> Problem:
        subtopic = config.subtopic
        difficulty = self._get_difficulty(config.difficulty)
        
        if subtopic == "facts-to-10":
            return self._generate_facts_to_10(index, difficulty, config)
        elif subtopic == "two-digit-with-regroup":
            return self._generate_two_digit_regroup(index, difficulty, config)
        # ... etc
    
    def _generate_facts_to_10(
        self, index: int, difficulty: Difficulty, config: GeneratorConfig
    ) -> Problem:
        # Generate two numbers that sum to 10 or less
        total = random.randint(2, 10)
        a = random.randint(0, total)
        b = total - a
        
        # Vary format
        formats = [
            (f"{a} + {b} = _____", str(a + b)),
            (f"_____ = {a} + {b}", str(a + b)),
            (f"{a} + _____ = {a + b}", str(b)),
        ]
        
        question, answer = random.choice(formats)
        
        hint = None
        if config.include_hints:
            hint = f"Count on from {a}: {a}, {a+1}, {a+2}..."
        
        return Problem(
            id=f"add-{index+1}",
            question=question,
            answer=answer,
            hint=hint,
            difficulty=difficulty,
            topic="addition",
            subtopic="facts-to-10",
        )
```

## GIT RULES
- Pull before editing: `git pull`
- Commit after each generator: `git add packages/generator && git commit -m "agent/generator: add [generator name]"`
- Push immediately: `git push`

## STATUS UPDATES
After each generator, update `scripts/agents/generator-status.md`:
- Which generators are complete
- Which are in progress
- Test results
```

---

## Part 5: Spawning Commands

### spawn-homebook-agents.sh

```bash
#!/bin/bash
# spawn-homebook-agents.sh
# Spawns all Homebook development agents in parallel

PROJECT_DIR="$(pwd)"
LOG_DIR="$PROJECT_DIR/logs/agents"
PROMPT_DIR="$PROJECT_DIR/scripts/agents"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)

mkdir -p "$LOG_DIR"
mkdir -p "$PROMPT_DIR"

echo "üè† HOMEBOOK - Spawning Agents at $TIMESTAMP"
echo "================================================"

# Define agents: name|budget
declare -a AGENTS=(
    "frontend|40"
    "backend|30"
    "generator|60"
    "templates|25"
    "infra|20"
)

PIDS=()

for AGENT_DEF in "${AGENTS[@]}"; do
    IFS='|' read -r AGENT BUDGET <<< "$AGENT_DEF"
    
    PROMPT_FILE="$PROMPT_DIR/${AGENT}-prompt.md"
    
    if [ ! -f "$PROMPT_FILE" ]; then
        echo "‚ö†Ô∏è  Missing prompt: $PROMPT_FILE"
        continue
    fi
    
    echo "üöÄ Starting $AGENT agent (budget: \$$BUDGET)..."
    
    claude --print \
        --allowedTools "Edit,Write,Bash,Read,Grep" \
        --dangerously-skip-permissions \
        --max-budget-usd "$BUDGET" \
        -p "$(cat $PROMPT_FILE)" \
        > "$LOG_DIR/${AGENT}-$TIMESTAMP.log" 2>&1 &
    
    PID=$!
    PIDS+=("$AGENT:$PID")
    echo "   PID: $PID"
    echo $PID > "$LOG_DIR/${AGENT}.pid"
    
    sleep 3  # Stagger starts
done

echo ""
echo "‚úÖ All agents spawned!"
echo ""
echo "Monitor with:"
echo "  tail -f $LOG_DIR/*-$TIMESTAMP.log"
echo ""
echo "Kill all with:"
echo "  pkill -f 'claude.*dangerously-skip-permissions'"
echo ""
echo "Agent PIDs:"
for entry in "${PIDS[@]}"; do
    echo "  $entry"
done
```

---

## Part 6: Project Initialization Checklist

Before spawning agents:

```bash
# 1. Create project structure
mkdir -p apps/web
mkdir -p packages/generator
mkdir -p templates
mkdir -p infra/aws
mkdir -p infra/docker
mkdir -p scripts/agents
mkdir -p logs/agents

# 2. Create placeholder files
touch apps/web/.gitkeep
touch packages/generator/.gitkeep
touch templates/.gitkeep
touch infra/.gitkeep

# 3. Initialize git
git init
echo "node_modules/\n.env\nlogs/\n*.log\n__pycache__/" > .gitignore
git add .
git commit -m "chore: initial project structure"

# 4. Create agent prompts (copy from this document)
# scripts/agents/frontend-prompt.md
# scripts/agents/backend-prompt.md
# scripts/agents/generator-prompt.md
# scripts/agents/templates-prompt.md
# scripts/agents/infra-prompt.md

# 5. Create status file stubs
for agent in frontend backend generator templates infra; do
    echo "# ${agent^} Agent Status\n\n## Status: Not started\n" > "scripts/agents/${agent}-status.md"
done

# 6. Spawn agents
./scripts/spawn-homebook-agents.sh
```

---

## Part 7: Success Metrics

When complete, Homebook should satisfy all user stories:

| Story | Key Feature | Validation |
|-------|-------------|------------|
| Ms. Rodriguez (5th fractions) | Unlike denominator addition, 3 difficulty levels | Generate worksheet with visual models option |
| Mr. Chen (3rd comparing) | Compare 3-digit numbers with <, >, = | Place value chart reference, ordering problems |
| Sarah (homeschool multi-grade) | K, 2nd, 6th grade in one session | Quick subject/grade switching |
| Tutoring center | Batch generation, progress trackers | Multiple worksheet types, speed drill format |
| Ms. Jackson (test prep) | State test format, multiple choice | Bubble sheet format, standards alignment |
| Mr. Williams (special ed) | Accommodations, large print, scaffolding | Accessibility options, reduced load |
| Sub teacher | Quick "review mix" generation | Emergency mode with grade-appropriate mix |
| Math coach | Challenge problems, competition level | Difficulty setting, logic puzzles |

---

## Next Steps

1. **Review this plan** - Approve the user stories and topic taxonomy
2. **Create agent prompts** - I can generate all 5 prompt files
3. **Initialize project** - Set up structure and git
4. **Spawn agents** - Run parallel development
5. **Monitor progress** - Check status files and logs
6. **Integration** - Connect frontend ‚Üí backend ‚Üí generator
7. **Test with user stories** - Validate each persona works

---

*Ready to generate the agent prompt files and spawn development?*
